<!DOCTYPE html>
<html dir="ltr" lang="en">
<head>

<!-- Title -->

	


<title>WebRTC is not true peer-to-peer — Home of Liam Z.</title>

<meta content="Home of Liam Z." property="og:site_name">
<meta content="WebRTC is not true peer-to-peer — Home of Liam Z." property="og:title">


  <meta content="article" property="og:type">



<!-- Description -->

	


<meta name="description" content="<p>Why should you care? Because, we are hindering exciting innovation in browser-based P2P, that which might provide magnificently simple solutions to problems such as sharing documents</p>">
<meta property="og:description" content="<p>Why should you care? Because, we are hindering exciting innovation in browser-based P2P, that which might provide magnificently simple solutions to problems such as sharing documents</p>">


<!-- Other fields. -->

  <meta content="http://liamz.co/webrtc-p2p-criticism/" property="og:url">


  <meta content="2013-06-06T00:00:00+10:00" property="article:published_time">
  <meta content="http://liamz.co/about/" property="article:author">

  <meta content="http://liamz.co/assets/img/portrait.png" property="og:image">

  <meta content="article" property="article:section">


  <meta content="tech" property="article:tag">



<meta http-equiv="date" content="Thursday, 06 2013 00:00:00 GMT">


<link rel="alternate" type="application/rss+xml" href="/rss.xml" title="RSS Feed">
<link rel="sitemap" type="application/xml" href="/sitemap.xml" title="Sitemap">
<link rel="source" href="https://github.com/liamzebedee/liamz.co" title="Source Code">

<!-- Desktop -->
<link rel="icon" type="image/png" href="/assets/img/portrait-round.png">
<!-- iOS, Android -->
<link rel="apple-touch-icon-precomposed" href="/assets/img/portrait.png">


<link href='/assets/site.css' rel='stylesheet' type='text/css' />


<meta http-equiv="X-UA-Compatible" content="chrome=1">
<meta charset="utf-8">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- Never cache. Ever. -->
<meta http-equiv="cache-control" content="max-age=0" />
<meta http-equiv="cache-control" content="no-cache" />
<meta http-equiv="expires" content="0" />
<meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
<meta http-equiv="pragma" content="no-cache" />

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.0/jquery.min.js"></script>
</head>
<body id="container" class="post" itemscope itemtype="http://schema.org/WebPage">

<div id="page">

<aside id="sidebar" itemscope itemtype="http://schema.org/WPSideBar">
<div class="wrap">
	<header id="masthead" itemscope itemtype="http://schema.org/WPHeader">
		<a href="/"><div id="portrait"></div></a>
		<h1 id="brand">Home of Liam&nbsp;Z.</h1>
		<h2 id="tagline"><small>Learner,&nbsp;hacker,&nbsp;thinker.</small></h2>
	</header>
	<nav id="menu">
	<ul class="unstyled" role="menu">
	
		<li role="menuitem" itemscope itemtype="http://schema.org/SiteNavigationElement">
			<h3><a href="/about/">About&nbsp;me</a></h3>
		</li>
	
		<li role="menuitem" itemscope itemtype="http://schema.org/SiteNavigationElement">
			<h3><a href="/endeavours/">Endeavours</a></h3>
		</li>
	
		<li role="menuitem" itemscope itemtype="http://schema.org/SiteNavigationElement">
			<h3><a href="/contact/">Contact</a></h3>
		</li>
	
		<li role="menuitem" itemscope itemtype="http://schema.org/SiteNavigationElement">
			<h3><a href="/quotes/">Quotes</a></h3>
		</li>
	
	</ul>
</nav>

</div>
</aside>

<article id="content"  itemscope itemtype="http://schema.org/Article" >
<div class="wrap">
<header>
	<span class="category label">article</span>
	<span class="topic label">tech</span>
	<span class="muted">— 
		<time class="timeago" datetime="2013-06-06T00:00:00Z" pubdate itemprop="datePublished">06 Jun 2013</time>
	</span>
	
	<h1 itemprop="headline">WebRTC is not true peer-to-peer</h1>	
</header>

<div itemprop="articleBody">
<p class='lead'>Why should you care? Because, we are hindering exciting innovation in browser-based P2P, that which might provide magnificently simple solutions to problems such as <a href='https://xkcd.com/949/' title='relevant xkcd'>sharing documents</a></p>
<p><em>In short:</em> WebRTC renders the bootstrapping process of peer-to-peer applications (wherein you join the network by initially connecting to a node and asking them for peers) unusable because the initial connection set-up is dependent on <strong>centralised</strong> servers.</p>

<p>I think very highly of WebRTC as a platform for a range of cool new innovations, but it is wrong to give it the status of supporting peer-to-peer (P2P) network models.</p>

<p>I&#8217;m writing this post as both a <strong>criticism</strong> of the current API and a <strong>plea</strong> for a solution to be adopted (as the APIs are still in development).</p>

<h2 id='problem'>Problem</h2>

<p>The current issue which is hindering my efforts to create a decentralised P2P web application, is the <strong>centralised</strong> nature of the initial connection set-up — this process is called <strong>signalling</strong>. In a typical P2P application, you join the network through asking a node for peers, a process known as bootstrapping. This is rendered impossible in WebRTC because to connect to a node you need to engage in signalling, which is centralised.</p>

<p>RTCPeerConnection is the interface whereby peers (browsers) may connect to each other. To initially set-up a connection, peers do two things:</p>

<ol>
<li>Firstly they exchange network information (network interfaces and ports) using the ICE framework.<sup id='fnref:1'><a href='#fn:1' rel='footnote'>1</a></sup></li>

<li>Secondly, they negotiate a set of configurations for that session, using an offer/answer based protocol.<sup id='fnref:2'><a href='#fn:2' rel='footnote'>2</a></sup> These configurations are stored as RTCSessionDescription objects.<sup id='fnref:3'><a href='#fn:3' rel='footnote'>3</a></sup></li>
</ol>

<p>Both of these steps require a <strong>signalling channel</strong>. My question is why?</p>

<h2 id='solutions'>Solutions</h2>

<p>You could write a terrible hack to make use of IRC web chat or anonymous XMPP servers to exchange signalling information. It wouldn&#8217;t be ethical or appropriate to rely on Wikileaks&#8217; web IRC for decentralised signalling, so there must be an alternative.</p>

<p>Another idea is to set-up a public signalling server. We already have public servers available for STUN (as provided by Google and Mozilla), which is the mechanism for traversing NAT. So why don&#8217;t we have them for signalling? Because they can be abused and again it is unreliable to rely on a third-party, which is the basis of this issue.</p>

<p>But the only real solution is <strong>changing the WebRTC API to suit us</strong>, so we could do do signalling by directly communicating with the other peer. I&#8217;ve looked into this and it <a href='http://stackoverflow.com/questions/16954585/is-it-possible-to-directly-connect-using-ice-and-then-do-direct-peer-to-peer-sig'>isn&#8217;t possible</a> right now, but I think it should be.</p>

<h2 id='conclusion'>Conclusion</h2>

<p>I don&#8217;t claim to have all the answers — if someone knows how to achieve this, and refutes what I have said, then great! Until then, <strong>something needs to be done</strong>.</p>
<div class='footnotes'><hr /><ol><li id='fn:1'>
<p>the WebRTC API has few tutorials for people coming from a BSD sockets background, but basically how this works is you use the <a href='http://www.w3.org/TR/webrtc/#widl-RTCPeerConnection-addIceCandidate-void-RTCIceCandidate-candidate'>addIceCandidate</a> function to add a remote endpoint (RTCIceCandidate object) for the peer you will be connecting to.</p>
<a href='#fnref:1' rev='footnote'>&#8617;</a></li><li id='fn:2'>
<p>see the <a href='http://dev.w3.org/2011/webrtc/editor/webrtc.html#widl-RTCPeerConnection-createOffer-void-RTCSessionDescriptionCallback-successCallback-RTCPeerConnectionErrorCallback-failureCallback-MediaConstraints-constraints'>createAnswer</a> documentation</p>
<a href='#fnref:2' rev='footnote'>&#8617;</a></li><li id='fn:3'>
<p>RTCSessionDescription is just a wrapper for an <a href='https://en.wikipedia.org/wiki/Session_Description_Protocol'>SDP Blob</a>, which is a really simple text-based format.</p>
<a href='#fnref:3' rev='footnote'>&#8617;</a></li></ol></div>
</div>

<!--
<footer>
</footer>
-->
</div>

</article>

</div>


<script src='/assets/jquery.timeago.js' type='text/javascript'></script>
<script src='/assets/bootstrap.min.js' type='text/javascript'></script>
<script src='/assets/main.js' type='text/javascript'></script>


</body>
</html>
